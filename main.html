<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<title>TRADR TJex 2015q</title>
    <link href="style/tabs.css" rel="stylesheet" type="text/css">
</head>

<body>

	<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
	<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <script src="script/vertical-tabs.js" type="text/javascript"></script>
	<script src="js/jsc3d.js" type="text/javascript"></script>
    <script src="js/jsc3d.touch.js" type="text/javascript"></script>
    <script src="js/jquery.js" type="text/javascript"></script>
    <script src="js/index.js" type="text/javascript"></script>
    <script src="js/lodash.js" type="text/javascript"></script>
   	<script src="js/stardog.js" type="text/javascript"></script>


	<section id="wrapper" class="wrapper">

        <div id="v-nav">
    
            <ul>
                <li tab="tab1" id="tab1" class="first current">Disaster Site</li>
                <li tab="tab2">Levels</li>
                <li tab="tab3">Area of Interest</li>
                <li tab="tab4" class="last">Data Management</li>
       
            </ul>
    
            <div class="tab-content">
                <div style="width:1024px; margin:auto; position:absolute; font-size: 9pt; color: #777777;">
                <label for="global_map" style="margin-left:1048px; position:inherit">Global&nbsp;Map</label>
                <div id="global_map" style="margin-left:1048px; margin-top:20px; position:inherit;">
                    
                    <form action="">
 						<select name="global_map_list" id="global_map_list">
                        	<option value="">Please select..</option>
  							<optgroup label="Global Metric Map">
   								<option>Global Occupancy Grid Map</option>
   								<option>Global Point Cloud Map</option>
  							</optgroup>
 
                            <optgroup label="Global Semantic Map">
                               <option>Global Object Map</option>
                               <option>Global Polygonal Mesh Map</option>
                               <option>Global Segmented Map</option>
                               <option>Global Topological Map</option>
                               <option>Global Traversability Map</option>
                            </optgroup>
                            
                            <optgroup label="Global Threedimensional Map">
                               <option>Global CAD Model</option>
                               <option>Global Collada Model</option>
                               <option>Global URDF Map</option>
                            </optgroup>
                            
                            <option>Global WiFi Map</option>
                            <option>Earth View</option>
                            <option>Street View</option>
                         </select>
                    </form>

        		</div>
                
                <canvas id="cv1" style="border: 1px solid;" width="1024" height="768" ></canvas>
                    <div align="center">
                        <button id="previous1">Previous</button>
                        <button id="next1">Next</button>
                     	<button id="load1" style="margin-left:860px">Load</button>
                    </div>
                </div>
             </div>
    
            <div class="tab-content">
                <div style="width:1024px; margin:auto; position:absolute; font-size: 9pt; color: #777777;">
                <label for="div-levels-cv2" style="margin-left:1048px; position:inherit">Levels</label>
                <div id="div-levels-cv2" style="margin-left:1048px; margin-top:20px; position:inherit;">
					<select id="sel-levels-cv2">
                    	<option>Please select..</option>
                    	<option>Ground level</option>
                        <option>First level</option>
                        <option>Second level</option>
                    </select>
        		</div>
                <label for="div-level_map-cv2" style="margin-left:1048px; margin-top:60px; position:inherit">Level&nbsp;Map</label>
                <div id="div-level_map-cv2" style="margin-left:1048px; margin-top:80px; position:inherit;">
					<form action="">
 						<select name="level_map_list-cv2" id="level_map_list-cv2">
                        	<option value="">Please select..</option>
  							<optgroup label="Level Metric Map">
   								<option>Level Occupancy Grid Map</option>
   								<option>Level Point Cloud Map</option>
  							</optgroup>
 
                            <optgroup label="Level Semantic Map">
                               <option>Level Object Map</option>
                               <option>Level Polygonal Mesh Map</option>
                               <option>Level Segmented Map</option>
                               <option>Level Topological Map</option>
                               <option>Level Traversability Map</option>
                            </optgroup>
                            
                            <optgroup label="Level Threedimensional Map">
                               <option>Level CAD Model</option>
                               <option>Level Collada Model</option>
                               <option>Level URDF Map</option>
                            </optgroup>
                            
                            <option>Level WiFi Map</option>
                            <option>Floor-plan</option>
                         </select>
                    </form>
        		</div>
                <label for="aoi-cv2" style="margin-left:1048px; margin-top:120px; position:inherit">Area&nbsp;of&nbsp;Interest</label>
                <div id="aoi-cv2" style="margin-left:1048px; margin-top:140px; position:inherit">
                	<form action="">
 						<select name="aoi_list-cv2" id="aoi_list-cv2">
                        	<option value="">Please select..</option>
  							<optgroup label="Indoor">
   								
  							</optgroup>
 
                            <optgroup label="Outdoor">
                              
                            </optgroup>
                           
                         </select>
                    </form>
                </div>
                
                <canvas id="cv2" style="border: 1px solid;" width="1024" height="768" ></canvas>
                    <div align="center">
                        <button id="previous2">Previous</button>
                        <button id="next2">Next</button>
                        <button id="load2" style="margin-left:860px">Load</button>
                    </div>
                </div>
            </div>
    
            <div class="tab-content">
                <div style="width:1024px; margin:auto; position:absolute; font-size: 9pt; color: #777777;">
                
                <label for="div-levels-cv3" style="margin-left:1048px; position:inherit">Levels</label>
                <div id="div-levels-cv3" style="margin-left:1048px; margin-top:20px; position:inherit;">
					<select id="sel-levels-cv3">
                    	<option value="">Please select..</option>
                    	<option>Ground level</option>
                        <option>First level</option>
                        <option>Second level</option>
                    </select>
        		</div>
                <label for="aoi-cv3" style="margin-left:1048px; margin-top:60px; position:inherit">Area&nbsp;of&nbsp;Interest</label>
                <div id="aoi-cv3" style="margin-left:1048px; margin-top:80px; position:inherit">
                	<form action="">
 						<select name="aoi_list-cv3" id="aoi_list-cv3">
                        	<option value="">Please select..</option>
  							<optgroup label="Indoor">
   								
  							</optgroup>
 
                            <optgroup label="Outdoor">
                              
                            </optgroup>
                           
                         </select>
                    </form>
                </div>
                <label for="local_map" style="margin-left:1048px; margin-top:120px; position:inherit">Local&nbsp;Map</label>
                <div id="local_map" style="margin-left:1048px; margin-top:140px; position:inherit;">
					<form action="">
 						<select name="local_map_list" id="local_map_list">
                        	<option value="">Please select..</option>
  							<optgroup label="Local Metric Map">
   								<option>Local Occupancy Grid Map</option>
   								<option>Local Point Cloud Map</option>
  							</optgroup>
 
                            <optgroup label="Local Semantic Map">
                               <option>Local Object Map</option>
                               <option>Local Polygonal Mesh Map</option>
                               <option>Local Segmented Map</option>
                               <option>Local Topological Map</option>
                               <option>Local Traversability Map</option>
                            </optgroup>
                            
                            <optgroup label="Local Threedimensional Map">
                               <option>Local CAD Model</option>
                               <option>Local Collada Model</option>
                               <option>Local URDF Map</option>
                            </optgroup>
                            
                         </select>
                    </form>
        		</div>
                
                <canvas id="cv3" style="border: 1px solid;" width="1024" height="768" ></canvas>
                    <div align="center">
                        <button id="previous3">Previous</button>
                        <button id="next3">Next</button>
                        <button id="load3" style="margin-left:860px">Load</button>
                    </div>
                </div>
            </div>
            
            <div class="tab-content">
                
            </div>
    
        </div>

	</section>

<script type="text/javascript">

var path = "/Users/mario/Work/Projects/TRADR/jsc3d/demos/models/";
var model_list = ['ptero.obj','parasau.obj','tirarex.obj'];
			
var canvas = [];
var viewer = [];
var counter = [];
var next_buttons = ['next1','next2','next3'];
var previous_buttons = ['previous1','previous2','previous3'];

canvas[0] = document.getElementById('cv1');
canvas[1] = document.getElementById('cv2');
canvas[2] = document.getElementById('cv3');
counter[0] = 0;
counter[1] = 0;
counter[2] = 0;

var conn;


window.onload = function() {
	for (i in canvas)
	{
		viewer[i] = new JSC3D.Viewer(canvas[i]);
		viewer[i].setParameter('SceneUrl', path + model_list[counter[i]]);
		viewer[i].setParameter('InitRotationX', 0);
		viewer[i].setParameter('InitRotationY', -30);
		viewer[i].setParameter('InitRotationZ', 0);
		viewer[i].setParameter('ModelColor', '#FFFFFF');
		viewer[i].setParameter('BackgroundColor1', '#AFAFAF');
		viewer[i].setParameter('BackgroundColor2', '#000000');
		viewer[i].setParameter('RenderMode', 'texturesmooth');
		viewer[i].setParameter('MipMapping', 'on');
		viewer[i].init();
		viewer[i].update();
	}

	document.getElementById(next_buttons[0]).addEventListener('click',function(e) {counter[0] = next(counter[0],viewer[0]);});
	document.getElementById(previous_buttons[0]).addEventListener('click',function(e) {counter[0] = previous(counter[0],viewer[0]);});
	document.getElementById(next_buttons[1]).addEventListener('click',function(e) {counter[1] = next(counter[1],viewer[1]);});
	document.getElementById(previous_buttons[1]).addEventListener('click',function(e) {counter[1] = previous(counter[1],viewer[1]);});
	document.getElementById(next_buttons[2]).addEventListener('click',function(e) {counter[2] = next(counter[2],viewer[2]);});
	document.getElementById(previous_buttons[2]).addEventListener('click',function(e) {counter[2] = previous(counter[2],viewer[2]);});
	
		
	conn = new Stardog.Connection();
	conn.setEndpoint("http://localhost:5820/");
	conn.setCredentials("admin", "admin");
	
	document.getElementById("tab1").click();
	
	<!---->document.getElementById('sel-levels-cv2').options.length = 1;
	<!---->document.getElementById('sel-levels-cv2').addEventListener('mousedown',function(e){getLevelNames(document.getElementById('sel-levels-cv2'));});
	
	getLevelNames(document.getElementById('sel-levels-cv2'));
	getLevelNames(document.getElementById('sel-levels-cv3'));
	
}
			
			
function next(counter,viewer) 
{
	counter = (counter < model_list.length - 1) ? counter + 1 : counter; 
	viewer.replaceSceneFromUrl(path + model_list[counter]);
	viewer.update();
	return counter;
}
			
function previous(counter,viewer) 
{
	counter = (counter > 0) ? counter - 1 : counter; 
	viewer.replaceSceneFromUrl(path + model_list[counter]);
	viewer.update();
	return counter;
}

function getLevelNames(selectID)
{
	selectID.options.length = 1;
	conn.query({
		database: "tradr-domain",
		query: "select ?levelname where {?level a :Level . ?level :hasLevelName ?levelname}",
        limit: 10,
        offset: 0
		},
    	function (data) {
			expect(data).not.to.be(null);
            expect(data.results).not.to.be(undefined);
            expect(data.results.bindings).not.to.be(undefined);
			console.log(data.results.bindings);
			
			var bindings = data.results.bindings;		
			for(i in bindings) {
				var binding = bindings[i];
				for(n in binding) {
					selectID.options[selectID.options.length] = new Option(binding[n].value, n);
					}
			}
	});
}

</script>



</body>

</html>
